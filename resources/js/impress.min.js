/**
 * impress.js
 *
 * impress.js is a presentation tool based on the power of CSS3 transforms and transitions
 * in modern browsers and inspired by the idea behind prezi.com.
 *
 * MIT Licensed.
 *
 * Copyright 2011 Bartek Szopka (@bartaz)
 */
(function(e,h){var o=function(){var a=e.createElement("dummy").style,b="Webkit Moz O ms Khtml".split(" "),c={};return function(i){if("undefined"===typeof c[i]){var d=i.charAt(0).toUpperCase()+i.substr(1),d=(i+" "+b.join(d+" ")+d).split(" ");c[i]=null;for(var e in d)if(void 0!==a[d[e]]){c[i]=d[e];break}}return c[i]}}(),j=function(a,b){var c,d;for(c in b)b.hasOwnProperty(c)&&(d=o(c),null!=d&&(a.style[d]=b[c]));return a},n=function(a){return e.getElementById(a)},p=function(a){return" translate3d("+a.x+
"px,"+a.y+"px,"+a.z+"px) "},q=function(a,b){var c=" rotateX("+a.x+"deg) ",d=" rotateY("+a.y+"deg) ",e=" rotateZ("+a.z+"deg) ";return b?e+d+c:c+d+e},k=navigator.userAgent.toLowerCase(),k=null!=o("perspective")&&-1==k.search(/(iphone)|(ipod)|(ipad)|(android)/),f=n("impress");if(k){f.className="";var l=e.createElement("div");l.className="canvas";[].slice.call(f.childNodes).forEach(function(a){l.appendChild(a)});f.appendChild(l);var d=function(a,b){b=b||e;return[].slice.call(b.querySelectorAll(a))}(".step",
f);e.documentElement.style.height="100%";j(e.body,{height:"100%",overflow:"hidden"});k={position:"absolute",transformOrigin:"top left",transition:"all 1s ease-in-out",transformStyle:"preserve-3d"};j(f,k);j(f,{top:"50%",left:"50%",perspective:"1000px"});j(l,k);var r={translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:1};d.forEach(function(a,b){var c=a.dataset,c={translate:{x:c.x||0,y:c.y||0,z:c.z||0},rotate:{x:c.rotateX||0,y:c.rotateY||0,z:c.rotateZ||c.rotate||0},scale:c.scale||1};a.stepData=c;if(!a.id)a.id=
"step-"+(b+1);j(a,{position:"absolute",transform:"translate(-50%,-50%)"+p(c.translate)+q(c.rotate)+(" scale("+c.scale+") "),transformStyle:"preserve-3d"})});var g=null,s=null,m=function(a){if(!a||!a.stepData||a==g)return!1;h.scrollTo(0,0);var b=a.stepData;g&&g.classList.remove("active");a.classList.add("active");f.className="step-"+a.id;h.clearTimeout(s);s=h.setTimeout(function(){h.location.hash="#/"+a.id},1E3);var c={rotate:{x:-parseInt(b.rotate.x,10),y:-parseInt(b.rotate.y,10),z:-parseInt(b.rotate.z,
10)},translate:{x:-b.translate.x,y:-b.translate.y,z:-b.translate.z},scale:1/parseFloat(b.scale)},d=c.scale>=r.scale;j(f,{perspective:1E3*b.scale+"px",transform:" scale("+c.scale+") ",transitionDelay:d?"500ms":"0ms"});j(l,{transform:q(c.rotate,!0)+p(c.translate),transitionDelay:d?"0ms":"500ms"});r=c;return g=a};e.addEventListener("keydown",function(a){if(9==a.keyCode||32<=a.keyCode&&34>=a.keyCode||37<=a.keyCode&&40>=a.keyCode){var b=g;switch(a.keyCode){case 33:case 37:case 38:b=d.indexOf(g)-1;b=0<=
b?d[b]:d[d.length-1];break;case 9:case 32:case 34:case 39:case 40:b=d.indexOf(g)+1,b=b<d.length?d[b]:d[0]}m(b);a.preventDefault()}},!1);e.addEventListener("click",function(a){for(var b=a.target;"A"!=b.tagName&&!b.stepData&&b!=e.body;)b=b.parentNode;if("A"==b.tagName){var c=b.getAttribute("href");c&&"#"==c[0]&&(b=n(c.slice(1)))}m(b)&&a.preventDefault()},!1);e.addEventListener("mousewheel",function(a){next=d.indexOf(g)-a.wheelDelta/Math.abs(a.wheelDelta);next=0<=next?d[next]:d[d.length-1];m(next)},
!1);h.addEventListener("hashchange",function(){m(n(h.location.hash.replace(/^#\/?/,"")))},!1);m(n(h.location.hash.replace(/^#\/?/,""))||d[0])}else f.className="impress-not-supported"})(document,window);